package {env}

import (
	"{projectName}/config"
    "github.com/common-go/mongo"
    "github.com/labstack/echo"
    "github.com/labstack/echo/middleware"
)

type EvaRoutes struct {
	Router *echo.Echo
}

func New{projectNameUpperFirstCharacter}Routes(e *echo.Echo, mongoConfig mongo.MongoConfig,) (*EvaRoutes, error) {
	applicationContext, err := config.NewApplicationContext(mongoConfig,)
	if err != nil {
		return nil, err
	}

	//middle for all routes
	e.Use(middleware.Logger())
	e.Use(middleware.Recover())


    {begin}
	{entityLowerFirstCharacter}Controller := applicationContext.{entity}Controller
	{entityLowerFirstCharacter}Path := "/{projectName}/{entityLowerFirstCharacter}"
	e.GET({entityLowerFirstCharacter}Path, {entityLowerFirstCharacter}Controller.GetAll())
	e.POST({entityLowerFirstCharacter}Path, {entityLowerFirstCharacter}Controller.Insert())
	e.GET({entityLowerFirstCharacter}Path+"/:id", {entityLowerFirstCharacter}Controller.GetById())
	e.POST({entityLowerFirstCharacter}Path+"/search", {entityLowerFirstCharacter}Controller.Search())
	e.PUT({entityLowerFirstCharacter}Path+"/:id", {entityLowerFirstCharacter}Controller.Update())
	{end}

	return &EvaRoutes{e}, nil
}
